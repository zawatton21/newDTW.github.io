import { Gvar } from '../variable'
import * as Adap from '../adapter/index'
import * as Func from '../func/index'

async function func046(this: any) {
        Adap.dbgprt(46);
        for (let cnt1 = 0; true; ++cnt1) {
            Gvar.var_491 = Adap.rnd(Gvar.var_33);
            Gvar.var_492 = Adap.rnd(Gvar.var_34);
            if (Gvar.var_493[1] == 1 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 1 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_72[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_80[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 1;
                break;
            }
            if (Gvar.var_493[2] == 1 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 2 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_72[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_80[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 2;
                break;
            }
            if (Gvar.var_493[3] == 1 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 3 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_72[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_80[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 3;
                break;
            }
            if (Gvar.var_493[4] == 1 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 4 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_72[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_80[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 4;
                break;
            }
            if (Gvar.var_493[5] == 1 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 5 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_72[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_80[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 5;
                break;
            }
            if (Gvar.var_493[6] == 1 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 6 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_72[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_80[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 6;
                break;
            }
            if (Gvar.var_493[7] == 1 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 7 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_72[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_80[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 7;
                break;
            }
            if (Gvar.var_493[8] == 1 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 8 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_72[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_80[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 8;
                break;
            }
            if (Gvar.var_493[9] == 1 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 9 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_72[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_80[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 9;
                break;
            }
            if (Gvar.var_493[10] == 1 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 10 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_72[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_80[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 10;
                break;
            }
            if (Gvar.var_493[11] == 1 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 11 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_72[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_80[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 11;
                break;
            }
            if (Gvar.var_493[12] == 1 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 12 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_72[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_80[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 12;
                break;
            }
            // 幻覚の迷宮
            if (Gvar.special_floor == 8 && Gvar.var_71[Gvar.var_491][Gvar.var_492] == 14 && Gvar.var_82[Gvar.var_491][Gvar.var_492] == 0 && Gvar.var_73[Gvar.var_491][Gvar.var_492] == 0) {
                Gvar.var_201 = 14;
                break;
            }
        }
        if (Gvar.special_floor == 5) { // 没特殊階層「ビンの中」ボスは毒グモ
            Gvar.var_491 = 19;
            Gvar.var_492 = 17;
        }
        if (Gvar.special_floor == 9) { // 幽霊部屋
            Gvar.var_491 = 21; // X軸21
            Gvar.var_492 = 16; // Y軸16
        }
        Gvar.var_66 = Gvar.var_491;
        Gvar.var_67 = Gvar.var_492;
        Gvar.var_65[Gvar.var_66][Gvar.var_67] = 1;
        Gvar.var_201 = Gvar.var_71[Gvar.var_66][Gvar.var_67];
        Gvar.var_74[Gvar.var_66][Gvar.var_67] = 2;
        Gvar.var_75[Gvar.var_201] = 1;
        if (Gvar.special_floor != 8) {
            await Func.func017();
            await Func.func018();
            if (Gvar.var_200 == Gvar.var_201 && Gvar.var_201 != 14) {
                Gvar.var_98 = 1;
            }
            if (Gvar.var_202 == Gvar.var_201 && Gvar.var_201 != 14) {
                Gvar.var_99 = 1;
            }
        }
        return;
}

export {func046}
