import { Gvar } from '../variable'
import * as Adap from '../adapter/index'
import * as Func from '../func/index'

async function func171(this: any) {
        Adap.dbgprt(171);
        if (Gvar.var_794 == 1) {
            Gvar.var_802 = Gvar.var_792[Gvar.var_793][Gvar.var_786][4];
            Gvar.belongings_item_list = Gvar.var_792[Gvar.var_793][Gvar.var_786][4];
            await Func.func492(); // アイテムリスト呼び出し
            Gvar.var_814 = Gvar.var_792[Gvar.var_793][Gvar.var_786][4];
            Gvar.item_modified_value = Gvar.var_792[Gvar.var_793][Gvar.var_786][5];
            Gvar.free_space_value = Gvar.var_792[Gvar.var_793][Gvar.var_786][53];
            Gvar.var_805 = Gvar.var_792[Gvar.var_793][Gvar.var_786][56];
            Gvar.var_810 = Gvar.var_792[Gvar.var_793][Gvar.var_786][6];
            Gvar.var_815 = Gvar.var_792[Gvar.var_793][Gvar.var_786][20];
            Gvar.var_816 = Gvar.var_792[Gvar.var_793][Gvar.var_786][21];
            Gvar.var_817 = Gvar.var_792[Gvar.var_793][Gvar.var_786][22];
            Gvar.var_818 = Gvar.var_792[Gvar.var_793][Gvar.var_786][23];
            Gvar.var_819 = Gvar.var_792[Gvar.var_793][Gvar.var_786][24];
            Gvar.var_820 = Gvar.var_792[Gvar.var_793][Gvar.var_786][25];
            Gvar.var_821 = Gvar.var_792[Gvar.var_793][Gvar.var_786][26];
            Gvar.var_822 = Gvar.var_792[Gvar.var_793][Gvar.var_786][27];
            Gvar.var_823 = Gvar.var_792[Gvar.var_793][Gvar.var_786][28];
            Gvar.var_824 = Gvar.var_792[Gvar.var_793][Gvar.var_786][29];
        }
        if (Gvar.var_794 == 2) {
            Gvar.var_802 = Gvar.var_792[Gvar.var_793][Gvar.var_786][7];
            Gvar.belongings_item_list = Gvar.var_792[Gvar.var_793][Gvar.var_786][7];
            await Func.func492(); // アイテムリスト呼び出し
            Gvar.var_814 = Gvar.var_792[Gvar.var_793][Gvar.var_786][7];
            Gvar.item_modified_value = Gvar.var_792[Gvar.var_793][Gvar.var_786][8];
            Gvar.free_space_value = Gvar.var_792[Gvar.var_793][Gvar.var_786][54];
            Gvar.var_805 = Gvar.var_792[Gvar.var_793][Gvar.var_786][57];
            Gvar.var_810 = Gvar.var_792[Gvar.var_793][Gvar.var_786][9];
            Gvar.var_815 = Gvar.var_792[Gvar.var_793][Gvar.var_786][30];
            Gvar.var_816 = Gvar.var_792[Gvar.var_793][Gvar.var_786][31];
            Gvar.var_817 = Gvar.var_792[Gvar.var_793][Gvar.var_786][32];
            Gvar.var_818 = Gvar.var_792[Gvar.var_793][Gvar.var_786][33];
            Gvar.var_819 = Gvar.var_792[Gvar.var_793][Gvar.var_786][34];
            Gvar.var_820 = Gvar.var_792[Gvar.var_793][Gvar.var_786][35];
            Gvar.var_821 = Gvar.var_792[Gvar.var_793][Gvar.var_786][36];
            Gvar.var_822 = Gvar.var_792[Gvar.var_793][Gvar.var_786][37];
            Gvar.var_823 = Gvar.var_792[Gvar.var_793][Gvar.var_786][38];
            Gvar.var_824 = Gvar.var_792[Gvar.var_793][Gvar.var_786][39];
        }
        if (Gvar.var_794 == 3) {
            Gvar.var_802 = Gvar.var_792[Gvar.var_793][Gvar.var_786][10];
            Gvar.belongings_item_list = Gvar.var_792[Gvar.var_793][Gvar.var_786][10];
            await Func.func492(); // アイテムリスト呼び出し
            Gvar.var_814 = Gvar.var_792[Gvar.var_793][Gvar.var_786][10];
            Gvar.item_modified_value = Gvar.var_792[Gvar.var_793][Gvar.var_786][11];
            Gvar.free_space_value = Gvar.var_792[Gvar.var_793][Gvar.var_786][55];
            Gvar.var_805 = Gvar.var_792[Gvar.var_793][Gvar.var_786][58];
            Gvar.var_810 = Gvar.var_792[Gvar.var_793][Gvar.var_786][12];
            Gvar.var_815 = Gvar.var_792[Gvar.var_793][Gvar.var_786][40];
            Gvar.var_816 = Gvar.var_792[Gvar.var_793][Gvar.var_786][41];
            Gvar.var_817 = Gvar.var_792[Gvar.var_793][Gvar.var_786][42];
            Gvar.var_818 = Gvar.var_792[Gvar.var_793][Gvar.var_786][43];
            Gvar.var_819 = Gvar.var_792[Gvar.var_793][Gvar.var_786][44];
            Gvar.var_820 = Gvar.var_792[Gvar.var_793][Gvar.var_786][45];
            Gvar.var_821 = Gvar.var_792[Gvar.var_793][Gvar.var_786][46];
            Gvar.var_822 = Gvar.var_792[Gvar.var_793][Gvar.var_786][47];
            Gvar.var_823 = Gvar.var_792[Gvar.var_793][Gvar.var_786][48];
            Gvar.var_824 = Gvar.var_792[Gvar.var_793][Gvar.var_786][49];
        }
        Gvar.number_of_abilities = Gvar.var_810;
        Gvar.disc_rarity = 0;
        if (Gvar.belongings_item_list > 1000) {
            if (Gvar.belongings_item_list >= 1000 && Gvar.belongings_item_list < 2000) {
                Gvar.belongings_item_list = Gvar.belongings_item_list - 1000;
                Gvar.var_802 = Gvar.var_802 - 1000;
                Gvar.var_814 = Gvar.var_814 - 1000;
                Gvar.disc_rarity = 1;
            }
            if (Gvar.belongings_item_list >= 2000 && Gvar.belongings_item_list < 3000) {
                Gvar.belongings_item_list = Gvar.belongings_item_list - 2000;
                Gvar.var_802 = Gvar.var_802 - 2000;
                Gvar.var_814 = Gvar.var_814 - 2000;
                Gvar.disc_rarity = 2;
            }
            if (Gvar.belongings_item_list >= 3000 && Gvar.belongings_item_list < 4000) {
                Gvar.belongings_item_list = Gvar.belongings_item_list - 3000;
                Gvar.var_802 = Gvar.var_802 - 3000;
                Gvar.var_814 = Gvar.var_814 - 3000;
                Gvar.disc_rarity = 3;
            }
        }
        Gvar.var_813 = Adap.sdim(64, 20, Gvar.length3 = null);
        Gvar.var_811 = Adap.dim(100);
        if (Gvar.var_794 == 1) {
            Gvar.var_825 = 20;
        }
        if (Gvar.var_794 == 2) {
            Gvar.var_825 = 30;
        }
        if (Gvar.var_794 == 3) {
            Gvar.var_825 = 40;
        }
        Gvar.var_826 = 1;
        Gvar.var_827 = 0;
        for (let cnt1 = 0; cnt1 < 10; ++cnt1) {
            Gvar.belongings_item_list = Gvar.var_792[Gvar.var_793][Gvar.var_786][Gvar.var_825];
            await Func.func492(); // アイテムリスト呼び出し
            if (Gvar.item_ability_description == "") {
                Gvar.var_826 = Gvar.var_826 - 1;
                break;
            }
            Gvar.var_813[Gvar.var_826] = Gvar.item_ability_description;
            Gvar.var_811[Gvar.var_826] = Gvar.belongings_item_list;
            Gvar.var_826 = Gvar.var_826 + 1;
            Gvar.var_825 = Gvar.var_825 + 1;
        }
        // Gvar.belongings_item_list == 104 は ｻﾞ･ﾊﾝﾄﾞのDISC
        if (Gvar.belongings_item_list == 104) {
            Gvar.var_826 = Gvar.var_826 + 1;
            Gvar.var_813[Gvar.var_826] = "こわれるぞ。";
            Gvar.var_811[Gvar.var_826] = 199;
            Gvar.var_810 = Gvar.var_810 + 1;
        }
        Gvar.var_801 = 170;
        if (Gvar.var_814 == 104) {
            Gvar.var_801 = 190;
        }
        Gvar.var_801 = (Gvar.var_810 + Gvar.free_space_value - 2) * 19 + 190;
        await Func.func172();
}

export {func171}
